{"version":3,"sources":["images/logo.svg","images/success.svg","images/error.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/Api.js","utils/utils.js","utils/Auth.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","className","src","logo","alt","this","props","loggedIn","email","to","onClick","onSignOut","loginPageActive","handleRedirect","React","Component","CurrentUserContext","createContext","Card","handleClick","onCardClick","card","handleLikeClick","onCardLike","handleCardDelete","onCardDelete","isOwn","owner","_id","context","isLiked","likes","some","item","type","aria-label","link","name","length","contextType","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","key","Footer","PopupWithForm","isOpen","noValidate","onSubmit","title","children","onClose","ImagePopup","EditProfilePopup","handleNameChange","evt","setState","target","value","handleDescriptionChange","description","handleSubmit","preventDefault","onUpdateUser","state","id","placeholder","required","minLength","maxLength","pattern","onChange","EditAvatarPopup","onUpdateAvatar","imageLinkRef","current","createRef","ref","AddPlacePopup","handleLinkChange","baseURL","token","_baseURL","_token","url","options","fetch","then","res","ok","json","Promise","reject","status","_fetchData","headers","authorization","formData","method","body","JSON","stringify","liked","baseAuthURL","_baseAuthURL","password","error","data","catch","console","log","message","localStorage","setItem","Login","handleChange","event","Auth","authorize","onLogin","history","push","withRouter","Register","onRegister","ProtectedRoute","component","InfoTooltip","includes","success","App","tokenCheck","getItem","getContent","register","removeItem","handleEditAvatarClick","isEditAvatarPopupOpen","handleEditProfileClick","isEditProfilePopupOpen","handleAddPlaceClick","isAddPlacePopupOpen","handleCardClick","selectedCardLink","selectedCardName","closeAllPopups","handleUpdateUser","userInfo","api","updateUserInfo","currentUser","handleUpdateAvatar","changeAvatar","handleAddPlaceSubmit","uploadCard","newCard","handleCardLike","likeCard","newCards","deleteCard","response","filter","all","getUserInfo","getInitialCards","initialCards","Provider","exact","path","isTooltipPopupOpen","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0fe11445.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e889e45f.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.75df9ada.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.db56ee32.svg\";","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport logo from '../images/logo.svg';\n\nclass Header extends React.Component {\n  render() {\n    return (\n      <header className=\"header\">\n        <img className=\"header__logo\" src={logo} alt=\"Логотип Место.\" />\n        {this.props.loggedIn ?\n          <>\n            <p className=\"header__email\">{this.props.email}</p>\n            <Link className=\"header__link header__link_logged\" to=\"signin\" onClick={this.props.onSignOut}>Выйти</Link>\n          </>\n          : <Link className=\"header__link\" to={this.props.loginPageActive ? \"signup\" : \"signin\"} onClick={this.props.handleRedirect}>\n            {this.props.loginPageActive ? \"Регистрация\" : \"Войти\"}\n          </Link>}\n      </header>\n    )\n  }\n}\n\nexport default Header;\n","import React from 'react';\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nclass Card extends React.Component {\n  handleClick = () => {\n    this.props.onCardClick(this.props.card);\n  }\n\n  handleLikeClick = () => {\n    this.props.onCardLike(this.props.card);\n  }\n\n  handleCardDelete = () => {\n    this.props.onCardDelete(this.props.card);\n  }\n\n  static contextType = CurrentUserContext;\n\n  render() {\n    const isOwn = this.props.card.owner._id === this.context._id;\n    const isLiked = this.props.card.likes.some(item => item._id === this.context._id);\n    return (\n      <div className=\"elements__item\">\n        <button className=\"elements__image-button\" type=\"button\" onClick={this.handleClick} aria-label=\"Увеличить изображение.\">\n          <img className=\"elements__image\" src={this.props.card.link} />\n        </button>\n        <div className=\"elements__container\">\n          <h2 className=\"elements__heading\">{this.props.card.name}</h2>\n          <div className=\"elements__like-container\">\n            <button className={isLiked ? \"elements__like-button elements__like-button_active\" : \"elements__like-button\"}\n              type=\"button\" aria-label=\"Поставить лайк.\" onClick={this.handleLikeClick} />\n            <p className=\"elements__like-counter\">{this.props.card.likes.length}</p>\n          </div>\n        </div>\n        {isOwn && <button className=\"elements__delete-button\" type=\"button\" aria-label=\"Удалить фото.\" onClick={this.handleCardDelete}/>}\n      </div>\n    )\n  }\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nclass Main extends React.Component {\n  static contextType = CurrentUserContext;\n\n  render() {\n    return (\n      <>\n        <main className=\"content\">\n          <section className=\"profile\">\n            <button className=\"profile__avatar-button\" type=\"button\" onClick={this.props.onEditAvatar} aria-label=\"Изменить аватар.\">\n              <img className=\"profile__avatar\" alt=\"Аватар пользователя.\" src={this.context && this.context.avatar} />\n            </button>\n            <div className=\"profile__info\">\n              <div className=\"profile__name-info\">\n                <h1 className=\"profile__name\">{this.context && this.context.name}</h1>\n                <button className=\"profile__edit-button\" type=\"button\" onClick={this.props.onEditProfile} aria-label=\"Редактировать информацию о пользователе.\"></button>\n              </div>\n              <p className=\"profile__description\">{this.context && this.context.about}</p>\n            </div>\n            <button className=\"profile__add-button\" type=\"button\" onClick={this.props.onAddPlace} aria-label=\"Добавить фото.\"></button>\n          </section>\n\n          <section className=\"elements\">\n            {this.props.cards.map(card => (\n              <Card card={card} key={card._id} onCardClick={this.props.onCardClick} onCardLike={this.props.onCardLike} onCardDelete={this.props.onCardDelete} />\n            ))}\n          </section>\n        </main>\n      </>\n    )\n  }\n}\n\nexport default Main;\n","import React from 'react';\n\nclass Footer extends React.Component {\n  render() {\n    return (\n      <footer className=\"footer\">\n        <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n      </footer>\n    )\n  }\n}\n\nexport default Footer;\n","import React from 'react';\n\nclass PopupWithForm extends React.Component {\n  render() {\n    return (\n      <div className={this.props.isOpen ? `popup popup_type_${this.props.name} popup_opened` : `popup popup_type_${this.props.name}`}>\n        <form className=\"popup__form\" name={this.props.name} noValidate onSubmit={this.props.onSubmit}>\n          <h2 className=\"popup__title\">{this.props.title}</h2>\n          {this.props.children}\n          <button className=\"popup__save-button\" type=\"submit\">Ок</button>\n          <button className=\"popup__close-button\" type=\"button\" onClick={this.props.onClose} aria-label=\"Закрыть окно.\"></button>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default PopupWithForm;\n","import React from 'react';\n\nclass ImagePopup extends React.Component {\n  render() {\n    return (\n      <div className={this.props.card ? \"popup popup_type_open-photo popup_opened\" : \"popup popup_type_open-photo\"}>\n        <div className=\"popup__photo-container\">\n          <img className=\"popup__image\" src={this.props.card}/>\n          <h2 className=\"popup__heading\"></h2>\n          <button className=\"popup__close-button\" type=\"button\" onClick={this.props.onClose} aria-label=\"Закрыть окно.\"></button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ImagePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nclass EditProfilePopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      description: ''\n    }\n  }\n\n  static contextType = CurrentUserContext;\n\n  componentDidMount() {\n    this.setState({\n      name: this.context.name,\n      description: this.context.about\n    })\n  }\n\n  handleNameChange = (evt) => {\n    this.setState({\n      name: evt.target.value\n    })\n  }\n\n  handleDescriptionChange = (evt) => {\n    this.setState({\n      description: evt.target.value\n    })\n  }\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n    this.props.onUpdateUser({\n      name: this.state.name,\n      about: this.state.description\n    })\n  }\n\n  render() {\n    return (\n      <PopupWithForm name=\"edit-info\" title=\"Редактировать профиль\" isOpen={this.props.isOpen} onClose={this.props.onClose} onSubmit={this.handleSubmit}>\n        <input className=\"popup__input popup__input_type_username\" id=\"username-input\" type=\"text\" name=\"username\"\n          placeholder=\"Имя пользователя\" required minLength=\"2\" maxLength=\"40\" pattern=\"[а-яА-Яa-zA-Z -]+\" value={this.state.name} onChange={this.handleNameChange} />\n        <span className=\"popup__input-error\" id=\"username-input-error\" />\n        <input className=\"popup__input popup__input_type_description\" id=\"description-input\" type=\"text\" name=\"description\"\n          placeholder=\"О себе\" required minLength=\"2\" maxLength=\"200\" value={this.state.description} onChange={this.handleDescriptionChange} />\n        <span className=\"popup__input-error\" id=\"description-input-error\" />\n      </PopupWithForm>\n    )\n  }\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nclass EditAvatarPopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.imageLinkRef = React.createRef();\n  }\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n    this.props.onUpdateAvatar(this.imageLinkRef.current.value);\n    this.imageLinkRef.current.value = '';\n  }\n\n  render() {\n    return (\n      <PopupWithForm name=\"change-avatar\" title=\"Обновить аватар\" isOpen={this.props.isOpen} onClose={this.props.onClose} onSubmit={this.handleSubmit}>\n        <input className=\"popup__input popup__input_type_link\" id=\"avatar-link-input\" type=\"url\" name=\"link\"\n          placeholder=\"Ссылка на картинку\" required ref={this.imageLinkRef} />\n        <span className=\"popup__input-error\" id=\"avatar-link-input-error\" />\n      </PopupWithForm>\n    )\n  }\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nclass AddPlacePopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      link: ''\n    }\n  }\n\n  handleNameChange = (evt) => {\n    this.setState({\n      name: evt.target.value\n    })\n  }\n\n  handleLinkChange = (evt) => {\n    this.setState({\n      link: evt.target.value\n    })\n  }\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n    this.props.onAddPlace({\n      name: this.state.name,\n      link: this.state.link\n    })\n    this.setState({\n      name: '',\n      link: ''\n    })\n  }\n\n  render() {\n    return (\n      <PopupWithForm name=\"add-photo\" title=\"Новое место\" isOpen={this.props.isOpen} onClose={this.props.onClose} onSubmit={this.handleSubmit}>\n        <input className=\"popup__input popup__input_type_place\" id=\"place-input\" type=\"text\" name=\"name\"\n          placeholder=\"Название\" required maxLength=\"30\" value={this.state.name} onChange={this.handleNameChange} />\n        <span className=\"popup__input-error\" id=\"place-input-error\"></span>\n        <input className=\"popup__input popup__input_type_link\" id=\"link-input\" type=\"url\" name=\"link\"\n          placeholder=\"Ссылка на картинку\" required value={this.state.link} onChange={this.handleLinkChange} />\n        <span className=\"popup__input-error\" id=\"link-input-error\"></span>\n      </PopupWithForm>\n    )\n  }\n}\n\nexport default AddPlacePopup;\n","import {baseURL, token} from './utils.js';\n\nclass Api {\n  constructor(baseURL, token) {\n    this._baseURL = baseURL;\n    this._token = token;\n  }\n\n  _fetchData(url, options) {\n    return fetch(this._baseURL + url, options)\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  getUserInfo() {\n    return this._fetchData('/users/me', {\n      headers: {\n        authorization: this._token\n      }\n    })\n  }\n\n  updateUserInfo(formData) {\n    return this._fetchData('/users/me', {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    })\n  }\n\n  getInitialCards() {\n    return this._fetchData('/cards', {\n      headers: {\n        authorization: this._token\n      }\n    })\n  }\n\n  uploadCard(formData) {\n    return this._fetchData('/cards', {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    })\n  }\n\n  likeCard(id, liked) {\n    let method;\n    if (liked) {\n      method = 'DELETE';\n    } else {\n      method = 'PUT';\n    }\n    return this._fetchData('/cards/likes/' + id, {\n      method: method,\n      headers: {\n        authorization: this._token\n      }\n    })\n  }\n\n  deleteCard(id) {\n    return this._fetchData('/cards/' + id, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    })\n  }\n\n  changeAvatar(link) {\n    return this._fetchData('/users/me/avatar', {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: link\n      })\n    })\n  }\n}\n\nexport default new Api(baseURL, token);\n","//Для валидации форм\nexport const validationProperties = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__save-button',\n  inactiveButtonClass: 'popup__save-button_disabled',\n  inputErrorClass: 'popup__input_type_error',\n  textErrorClass: 'popup__input-error_visible'\n};\n\n//Базовый URL для запросов\nexport const baseURL = 'https://mesto.nomoreparties.co/v1/cohort-12';\nexport const token = 'd20b4294-3a82-4b74-a8d9-f1654e520eb0';\n\n//Другой URL для авторизации\nexport const baseAuthURL = 'https://auth.nomoreparties.co';\n","import { baseAuthURL } from './utils.js';\n\nclass Auth {\n  constructor(baseAuthURL) {\n    this._baseAuthURL = baseAuthURL;\n  }\n\n  register(email, password) {\n    return fetch(this._baseAuthURL + '/signup', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ email, password })\n    })\n      .then(res => {\n        try {\n          if (res.ok) {\n            return res.json();\n          }\n        } catch (error) {\n          return (error);\n        }\n      })\n      .then(data => {\n        return data;\n      })\n      .catch(error => console.log(error.message));\n  }\n\n  authorize(email, password) {\n    return fetch(this._baseAuthURL + '/signin', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ email, password })\n    })\n      .then(res => {\n        try {\n          if (res.ok) {\n            return res.json();\n          }\n        } catch (error) {\n          return (error);\n        }\n      })\n      .then(data => {\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n          return data;\n        }\n      })\n      .catch(error => console.log(error.message));\n  }\n\n  getContent(token) {\n    return fetch(this._baseAuthURL + '/users/me', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      }\n    })\n      .then(res => {\n        try {\n          if (res.ok) {\n            return res.json();\n          }\n        } catch (error) {\n          return (error);\n        }\n      })\n      .then(data => data)\n      .catch(error => console.log(error.message));\n  }\n}\n\nexport default new Auth(baseAuthURL);\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport Auth from '../utils/Auth.js';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: ''\n    }\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    if (!this.state.email || !this.state.password) {\n      return;\n    }\n\n    Auth.authorize(this.state.email, this.state.password)\n      .then(data => {\n        if (data.token) {\n          this.props.onLogin(this.state.email);\n          this.setState({ email: '', password: '' }, () => {\n            this.props.history.push('/');\n          })\n        }\n      })\n      .catch(error => console.log(error.message));\n  }\n\n  render() {\n    return (\n      <div className=\"login\">\n        <p className=\"login__heading\">Вход</p>\n        <form className=\"login__form\" onSubmit={this.handleSubmit}>\n          <input className=\"login__input\" id=\"email\" name=\"email\" type=\"email\" required\n            value={this.state.email} onChange={this.handleChange} placeholder=\"Email\" />\n          <input className=\"login__input\" id=\"password\" name=\"password\" type=\"password\" required\n            value={this.state.password} onChange={this.handleChange} placeholder=\"Пароль\" />\n          <button className=\"login__submit-button\" type=\"submit\">Войти</button>\n        </form>\n        <Link className=\"login__link\" to=\"signup\" onClick={this.props.handleRedirect}>Ещё не зарегистрированы? Регистрация</Link>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Login);\n","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: ''\n    }\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    if (!this.state.email || !this.state.password) {\n      return;\n    }\n\n    this.props.onRegister(this.state.email, this.state.password);\n  }\n\n  render() {\n    return (\n      <div className=\"register\">\n        <p className=\"register__heading\">Регистрация</p>\n        <form className=\"register__form\" onSubmit={this.handleSubmit}>\n          <input className=\"register__input\" id=\"email\" name=\"email\" type=\"email\" required\n            value={this.state.email} onChange={this.handleChange} placeholder=\"Email\" />\n          <input className=\"register__input\" id=\"password\" name=\"password\" type=\"password\" required\n            value={this.state.password} onChange={this.handleChange} placeholder=\"Пароль\" />\n          <button className=\"register__submit-button\" type=\"submit\">Зарегистрироваться</button>\n        </form>\n        <Link className=\"register__link\" to=\"signin\" onClick={this.props.handleRedirect}>Уже зарегистрированы? Войти</Link>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Register);\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {props.loggedIn ? <Component {...props} /> : <Redirect to='/login' />}\n    </Route>\n)}\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport success from '../images/success.svg';\nimport error from '../images/error.svg';\n\nclass InfoTooltip extends React.Component {\n  render() {\n    return (\n      <div className={this.props.message ? \"popup popup_type_tooltip popup_opened\" : \"popup popup_type_tooltip\"}>\n        <div className=\"popup__form\">\n          <img className=\"popup__tooltip-image\" src={this.props.message && this.props.message.includes(\"успешно\") ? success : error} />\n          <h2 className=\"popup__tooltip-text\">{this.props.message}</h2>\n          <button className=\"popup__close-button\" type=\"button\" onClick={this.props.onClose} aria-label=\"Закрыть окно.\"></button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default InfoTooltip;\n","import React from 'react';\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport api from '../utils/Api.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport Auth from '../utils/Auth.js';\nimport InfoTooltip from './InfoTooltip.js';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditProfilePopupOpen: false,\n      isAddPlacePopupOpen: false,\n      isEditAvatarPopupOpen: false,\n      selectedCardLink: null,\n      selectedCardName: null,\n      currentUser: null,\n      cards: [],\n      loggedIn: false,\n      email: null,\n      loginPageActive: true,\n      message: null\n    }\n  }\n\n  componentDidMount() {\n    this.tokenCheck();\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([userInfo, initialCards]) => {\n        this.setState({\n          currentUser: userInfo,\n          cards: initialCards\n        })\n      })\n      .catch(error => console.log(error));\n  }\n\n  tokenCheck = () => {\n    if (localStorage.getItem('token')) {\n      const token = localStorage.getItem('token');\n      Auth.getContent(token)\n        .then(res => {\n          if (res) {\n            this.setState({\n              loggedIn: true,\n              email: res.data.email,\n              loginPageActive: false\n            }, () => {\n              this.props.history.push(\"/\");\n            });\n          }\n        });\n    }\n  }\n\n  onLogin = (email) => {\n    this.setState({\n      loggedIn: true,\n      email,\n      loginPageActive: false\n    })\n  }\n\n  onRegister = (email, password) => {\n    Auth.register(email, password)\n      .then(res => {\n        if (res) {\n          this.setState({\n            message: 'Вы успешно зарегистрировались!'\n          }, () => {\n            this.props.history.push('/signin');\n          })\n        } else {\n          this.setState({\n            message: 'Что-то пошло не так! Попробуйте ещё раз.'\n          })\n        }\n      });\n  }\n\n  onSignOut = () => {\n    this.setState({\n      loggedIn: false,\n      email: null,\n      loginPageActive: true\n    })\n    localStorage.removeItem('token');\n  }\n\n  handleRedirect = () => {\n    this.setState({\n      loginPageActive: !this.state.loginPageActive\n    })\n  }\n\n  handleEditAvatarClick = () => {\n    this.setState({\n      isEditAvatarPopupOpen: true\n    })\n  }\n\n  handleEditProfileClick = () => {\n    this.setState({\n      isEditProfilePopupOpen: true\n    })\n  }\n\n  handleAddPlaceClick = () => {\n    this.setState({\n      isAddPlacePopupOpen: true\n    })\n  }\n\n  handleCardClick = (card) => {\n    this.setState({\n      selectedCardLink: card.link,\n      selectedCardName: card.name\n    })\n  }\n\n  closeAllPopups = () => {\n    this.setState({\n      isEditProfilePopupOpen: false,\n      isAddPlacePopupOpen: false,\n      isEditAvatarPopupOpen: false,\n      selectedCardLink: null,\n      selectedCardName: null,\n      message: null\n    })\n  }\n\n  handleUpdateUser = (userInfo) => {\n    api.updateUserInfo(userInfo)\n      .then(userInfo => {\n        this.setState({\n          currentUser: userInfo\n        })\n        this.closeAllPopups();\n      })\n      .catch(error => console.log(error));\n  }\n\n  handleUpdateAvatar = (link) => {\n    api.changeAvatar(link)\n      .then(userInfo => {\n        this.setState({\n          currentUser: userInfo\n        })\n        this.closeAllPopups();\n      })\n      .catch(error => console.log(error));\n  }\n\n  handleAddPlaceSubmit = (formData) => {\n    api.uploadCard(formData)\n      .then(newCard => {\n        this.setState({\n          cards: [newCard, ...this.state.cards]\n        });\n        this.closeAllPopups();\n      })\n      .catch(error => console.log(error));\n  }\n\n  handleCardLike = (card) => {\n    const isLiked = card.likes.some(item => item._id === this.state.currentUser._id);\n    api.likeCard(card._id, isLiked)\n      .then(newCard => {\n        const newCards = this.state.cards.map(item => item._id === card._id ? newCard : item);\n        this.setState({\n          cards: newCards\n        });\n      })\n      .catch(error => console.log(error));\n  }\n\n  handleCardDelete = (card) => {\n    api.deleteCard(card._id)\n      .then(response => {\n        const newCards = this.state.cards.filter(item => item._id !== card._id);\n        this.setState({\n          cards: newCards\n        });\n      })\n      .catch(error => console.log(error));\n  }\n\n  render() {\n    return (\n      <div className=\"page\">\n        <CurrentUserContext.Provider value={this.state.currentUser}>\n          <Header loggedIn={this.state.loggedIn} email={this.state.email} loginPageActive={this.state.loginPageActive}\n            onSignOut={this.onSignOut} handleRedirect={this.handleRedirect} />\n          <Switch>\n            <ProtectedRoute exact path=\"/\"\n              loggedIn={this.state.loggedIn}\n              onEditProfile={this.handleEditProfileClick}\n              onAddPlace={this.handleAddPlaceClick}\n              onEditAvatar={this.handleEditAvatarClick}\n              onCardClick={this.handleCardClick}\n              cards={this.state.cards}\n              onCardLike={this.handleCardLike}\n              onCardDelete={this.handleCardDelete}\n              component={Main} />\n\n            <Route path=\"/signin\">\n              <Login onLogin={this.onLogin} handleRedirect={this.handleRedirect} />\n            </Route>\n\n            <Route path=\"/signup\">\n              <Register onRegister={this.onRegister} handleRedirect={this.handleRedirect} />\n            </Route>\n\n            <Route>\n              <Redirect to={`/${this.state.loggedIn ? '' : 'signin'}`} />\n            </Route>\n          </Switch>\n\n          <Footer />\n\n          {this.state.currentUser && <EditProfilePopup isOpen={this.state.isEditProfilePopupOpen} onClose={this.closeAllPopups} onUpdateUser={this.handleUpdateUser} />}\n\n          <AddPlacePopup isOpen={this.state.isAddPlacePopupOpen} onClose={this.closeAllPopups} onAddPlace={this.handleAddPlaceSubmit} />\n\n          <PopupWithForm name=\"delete-photo\" title=\"Вы уверены?\" />\n\n          <EditAvatarPopup isOpen={this.state.isEditAvatarPopupOpen} onClose={this.closeAllPopups} onUpdateAvatar={this.handleUpdateAvatar} />\n\n          <ImagePopup card={this.state.selectedCardLink} name={this.state.selectedCardName} onClose={this.closeAllPopups} />\n\n          <InfoTooltip isOpen={this.state.isTooltipPopupOpen} onClose={this.closeAllPopups} message={this.state.message} />\n        </CurrentUserContext.Provider>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}